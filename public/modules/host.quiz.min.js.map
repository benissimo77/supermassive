{"version":3,"file":"host.quiz.min.js","sources":["../src/BaseScene.ts","../src/quiz/QuestionFactory.ts","../src/QuizHostScene.ts"],"sourcesContent":["import SocketManagerPlugin from './socketManager';\r\nimport { Socket } from 'socket.io-client';\r\n\r\nexport abstract class BaseScene extends Phaser.Scene {\r\n    private static currentHeight = 1080;\r\n    private resizeHandler: (gameSize: Phaser.Structs.Size) => void;\r\n    private shutdownHandler: () => void;\r\n    protected socket: Socket;\r\n\r\n    init(): void {\r\n        console.log(`${this.scene.key}:: BaseScene.init: hello`);\r\n\r\n        // Store the resize handler reference so it can be removed later\r\n        this.resizeHandler = (gameSize: Phaser.Structs.Size) => {\r\n            this.handleResize(gameSize);\r\n        };\r\n        this.shutdownHandler = () => {\r\n            this.shutdown();\r\n        }\r\n\r\n        // Add a resize listener\r\n        this.scale.on('resize', this.resizeHandler);\r\n\r\n        // and a shutdown event listener to clean up the resize listener\r\n        // when the scene is shut down\r\n        this.events.on('shutdown', this.shutdownHandler);\r\n\r\n        // Call handleResize immediately to set up the initial camera zoom and screen height\r\n        this.handleResize(this.scale.gameSize);\r\n\r\n        // Initialise the socket manager\r\n        const plugin = this.plugins.get('SocketManagerPlugin') as SocketManagerPlugin;\r\n        if (!plugin) throw new Error('SocketManagerPlugin not found');\r\n        const socket = plugin.getSocket();\r\n        if (!socket) throw new Error('Socket not initialized');\r\n        this.socket = socket;\r\n\r\n        this.socket.onAny((event, ...args) => {\r\n            console.log('BaseScene:: Socket event:', event, args);\r\n        });\r\n\r\n    }\r\n\r\n    handleResize(gameSize: Phaser.Structs.Size): void {\r\n        console.log(`${this.scene.key}:: BaseScene.handleResize:`, gameSize.width, gameSize.height);\r\n\r\n        const scaleX = gameSize.width / 1920;\r\n\r\n        // Calculate the logical height visible through the camera\r\n        const logicalHeight = gameSize.height / scaleX;\r\n\r\n        // Set the camera properties - will be overridden by the game scene\r\n        // this.setCameraProperties(scaleX);\r\n        const camera = this.cameras.main;\r\n        camera.setOrigin(0, 0);\r\n        camera.setZoom(scaleX);\r\n\r\n        this.updateHeight(logicalHeight);\r\n    }\r\n\r\n    updateHeight(newHeight: number): void {\r\n        console.log('BaseScene:: updateHeight:', newHeight);\r\n        BaseScene.currentHeight = newHeight;\r\n    }\r\n\r\n    getY(originalY: number): number {\r\n        const scaleFactor = this.getScaleFactor();\r\n        return originalY * scaleFactor;\r\n    }\r\n\r\n    // getScaleFactor - this hardcodes 1080 as the logical height\r\n    getScaleFactor(): number {\r\n        return BaseScene.currentHeight / 1080;\r\n    }\r\n\r\n    shutdown(): void {\r\n        console.log(`BaseScene:: shutdown`);\r\n\r\n        // Remove the resize listener\r\n        this.scale.off('resize', this.resizeHandler);\r\n        this.events.off('shutdown', this.shutdownHandler);\r\n\r\n        // Remove the socket listeners\r\n        this.socket.removeAllListeners();\r\n\r\n        // Call the child scene shutdown method to allow them to clean up\r\n        this.sceneShutdown();\r\n    }\r\n    abstract sceneShutdown(): void;\r\n\r\n}\r\n\r\n","import { IQuizQuestion } from \"./IQuizQuestion\";\r\n\r\nexport class QuestionFactory {\r\n    private scene: Phaser.Scene;\r\n    private registry: Map<string, string> = new Map();\r\n\r\n    constructor(scene: Phaser.Scene) {\r\n        this.scene = scene;\r\n    }\r\n\r\n    register(type: string, path: string): void {\r\n        this.registry.set(type, path);\r\n    }\r\n\r\n    create(type: string, data: any): IQuizQuestion | null {\r\n        const path = this.registry.get(type);\r\n\r\n        if (!path) {\r\n            console.error(`Question type not registered: ${type}`);\r\n            return null;\r\n        }\r\n\r\n        try {\r\n            // Dynamic import would be ideal here, but for simplicity in this example\r\n            // we'll use a switch statement\r\n\r\n            switch (type) {\r\n                case 'multiple-choice':\r\n                    const MultipleChoiceQuestion = require(path).default;\r\n                    return new MultipleChoiceQuestion(this.scene, data);\r\n\r\n                case 'true-false':\r\n                    const TrueFalseQuestion = require(path).default;\r\n                    return new TrueFalseQuestion(this.scene, data);\r\n\r\n                case 'hotspot':\r\n                    const HotspotQuestion = require(path).default;\r\n                    return new HotspotQuestion(this.scene, data);\r\n\r\n                case 'point-it-out':\r\n                    const PointItOutQuestion = require(path).default;\r\n                    return new PointItOutQuestion(this.scene, data);\r\n\r\n                case 'ordering':\r\n                    const OrderingQuestion = require(path).default;\r\n                    return new OrderingQuestion(this.scene, data);\r\n\r\n                case 'matching':\r\n                    const MatchingQuestion = require(path).default;\r\n                    return new MatchingQuestion(this.scene, data);\r\n\r\n                case 'text':\r\n                    const TextQuestion = require(path).default;\r\n                    return new TextQuestion(this.scene, data);\r\n\r\n                case 'draw':\r\n                    const DrawQuestion = require(path).default;\r\n                    return new DrawQuestion(this.scene, data);\r\n\r\n                default:\r\n                    console.error(`Unknown question type: ${type}`);\r\n                    return null;\r\n            }\r\n        } catch (error) {\r\n            console.error(`Error creating question type ${type}:`, error);\r\n            return null;\r\n        }\r\n    }\r\n}","import { BaseScene } from \"./BaseScene\";\r\n\r\nimport { QuestionFactory } from \"./quiz/QuestionFactory\";\r\nimport { IQuizQuestion } from \"./quiz/IQuizQuestion\";\r\n\r\nexport default class QuizHostScene extends BaseScene {\r\n\r\n    static readonly KEY = 'QuizHostScene';\r\n\r\n    private questions: any[] = [];\r\n    private currentQuestion: IQuizQuestion | null = null;\r\n    private currentRound: any = null;\r\n    private currentQuestionIndex: number = 0;\r\n    private currentRoundIndex: number = 0;\r\n    private playerScores: Map<string, number> = new Map();\r\n    private playerAnswers: Map<string, any> = new Map();\r\n    private questionFactory: QuestionFactory;\r\n\r\n    // UI elements\r\n    private roundDisplay: Phaser.GameObjects.Text;\r\n    private timerBar: Phaser.GameObjects.Graphics;\r\n    private timerText: Phaser.GameObjects.Text;\r\n    private scoreBoard: Phaser.GameObjects.Container;\r\n\r\n    // Add this constructor to set the scene key\r\n    constructor() {\r\n        super(QuizHostScene.KEY);\r\n    }\r\n\r\n    init(): void {\r\n        super.init();\r\n\r\n        this.playerScores = new Map();\r\n        this.playerAnswers = new Map();\r\n        this.questionFactory = new QuestionFactory(this);\r\n\r\n        // Setup socket listeners\r\n        this.setupSocketListeners();\r\n    }\r\n\r\n    preload(): void {\r\n        // Load common assets for all question types\r\n        this.load.image('quiz-background', 'assets/quiz-bg.png');\r\n        this.load.image('answer-button', 'assets/quiz-button.png');\r\n        this.load.image('player-marker', 'assets/player-marker.png');\r\n\r\n        // Load custom fonts\r\n        this.load.rexWebFont({\r\n            google: {\r\n                families: ['Titan One']\r\n            }\r\n        });\r\n\r\n        // Load other assets that might be needed for specific question types\r\n        this.load.audio('countdown', 'assets/sounds/countdown.mp3');\r\n        this.load.audio('correct', 'assets/sounds/correct.mp3');\r\n        this.load.audio('incorrect', 'assets/sounds/incorrect.mp3');\r\n\r\n        // Register question type renderers\r\n        this.registerQuestionRenderers();\r\n    }\r\n\r\n    create(): void {\r\n        // Create background\r\n        this.add.image(0, 0, 'quiz-background').setOrigin(0, 0);\r\n\r\n        // Create UI elements\r\n        this.createUI();\r\n\r\n        // Let the server know we're ready\r\n        this.socket.emit('host:quiz-ready');\r\n    }\r\n\r\n\r\n    private setupSocketListeners(): void {\r\n        // Listen for intro quiz message\r\n        this.socket.on('server:introquiz', (data) => {\r\n            this.showQuizIntro(data.title, data.description);\r\n        });\r\n\r\n        // Listen for intro round message\r\n        this.socket.on('server:introround', (data) => {\r\n            this.showRoundIntro(data.roundnumber, data.title, data.description);\r\n        });\r\n\r\n        // Listen for question\r\n        this.socket.on('server:question', (question) => {\r\n            this.displayQuestion(question);\r\n        });\r\n\r\n        // Player answered a question\r\n        this.socket.on('server:questionanswered', (data) => {\r\n            this.playerAnswers.set(data.sessionID, data.response);\r\n            this.updatePlayerAnswer(data.sessionID, data.response);\r\n        });\r\n\r\n        // Show answer\r\n        this.socket.on('server:showanswer', (data) => {\r\n            this.showAnswer(data);\r\n        });\r\n\r\n        // Update scores\r\n        this.socket.on('server:updatescores', (data) => {\r\n            this.updateScores(data.scores);\r\n        });\r\n\r\n        // End round\r\n        this.socket.on('server:endround', (data) => {\r\n            this.endRound(data);\r\n        });\r\n\r\n        // End quiz\r\n        this.socket.on('server:endquiz', (data) => {\r\n            this.showFinalScores();\r\n        });\r\n\r\n        // Start timer\r\n        this.socket.on('server:starttimer', (data) => {\r\n            this.startTimer(data.duration);\r\n        });\r\n    }\r\n\r\n    private createUI(): void {\r\n        // Round display\r\n        this.roundDisplay = this.add.text(\r\n            this.cameras.main.width / 2,\r\n            50,\r\n            '',\r\n            {\r\n                fontSize: '32px',\r\n                fontFamily: '\"Titan One\", Arial',\r\n                color: '#ffffff',\r\n                stroke: '#000000',\r\n                strokeThickness: 4\r\n            }\r\n        ).setOrigin(0.5);\r\n\r\n        // Timer bar\r\n        this.timerBar = this.add.graphics();\r\n\r\n        // Timer text\r\n        this.timerText = this.add.text(\r\n            this.cameras.main.width / 2,\r\n            600,\r\n            '',\r\n            {\r\n                fontSize: '28px',\r\n                fontFamily: '\"Titan One\", Arial',\r\n                color: '#ffffff',\r\n                stroke: '#000000',\r\n                strokeThickness: 3\r\n            }\r\n        ).setOrigin(0.5);\r\n\r\n        // Score board\r\n        this.scoreBoard = this.add.container(50, 650);\r\n    }\r\n\r\n    private registerQuestionRenderers(): void {\r\n        // Register each question type with the factory\r\n        this.questionFactory.register('multiple-choice', './quiz/MultipleChoiceQuestion');\r\n        this.questionFactory.register('true-false', './quiz/TrueFalseQuestion');\r\n        this.questionFactory.register('hotspot', './quiz/HotspotQuestion');\r\n        this.questionFactory.register('point-it-out', './quiz/PointItOutQuestion');\r\n        this.questionFactory.register('ordering', './quiz/OrderingQuestion');\r\n        this.questionFactory.register('matching', './quiz/MatchingQuestion');\r\n        this.questionFactory.register('text', './quiz/TextQuestion');\r\n        this.questionFactory.register('draw', './quiz/DrawQuestion');\r\n    }\r\n\r\n    private showQuizIntro(title: string, description: string): void {\r\n        // Clear previous UI elements\r\n        this.clearQuestion();\r\n\r\n        // Show quiz title\r\n        const titleText = this.add.text(\r\n            this.cameras.main.width / 2,\r\n            200,\r\n            title,\r\n            {\r\n                fontSize: '64px',\r\n                fontFamily: '\"Titan One\", Arial',\r\n                color: '#ffffff',\r\n                stroke: '#000000',\r\n                strokeThickness: 6,\r\n                align: 'center'\r\n            }\r\n        ).setOrigin(0.5);\r\n\r\n        // Remove HTML tags from description\r\n        const cleanDescription = description.replace(/<\\/?[^>]+(>|$)/g, \"\");\r\n\r\n        // Show description\r\n        const descText = this.add.text(\r\n            this.cameras.main.width / 2,\r\n            350,\r\n            cleanDescription,\r\n            {\r\n                fontSize: '32px',\r\n                fontFamily: 'Arial',\r\n                color: '#ffffff',\r\n                align: 'center',\r\n                wordWrap: { width: this.cameras.main.width - 200 }\r\n            }\r\n        ).setOrigin(0.5);\r\n\r\n        // Add \"Start\" button\r\n        const startButton = this.add.text(\r\n            this.cameras.main.width / 2,\r\n            550,\r\n            'START QUIZ',\r\n            {\r\n                fontSize: '36px',\r\n                fontFamily: '\"Titan One\", Arial',\r\n                color: '#ffffff',\r\n                backgroundColor: '#0066cc',\r\n                padding: { x: 30, y: 15 }\r\n            }\r\n        )\r\n            .setOrigin(0.5)\r\n            .setInteractive({ useHandCursor: true })\r\n            .on('pointerdown', () => {\r\n                this.socket.emit('host:next');\r\n            });\r\n\r\n        // Animation for intro elements\r\n        this.tweens.add({\r\n            targets: [titleText, descText, startButton],\r\n            alpha: { from: 0, to: 1 },\r\n            y: '-=30',\r\n            duration: 800,\r\n            ease: 'Power2',\r\n            stagger: 200\r\n        });\r\n    }\r\n\r\n    private showRoundIntro(roundNumber: number, title: string, description: string): void {\r\n        // Clear previous UI\r\n        this.clearQuestion();\r\n\r\n        // Update current round text\r\n        this.roundDisplay.setText(`Round ${roundNumber}: ${title}`);\r\n\r\n        // Show round title\r\n        const roundTitle = this.add.text(\r\n            this.cameras.main.width / 2,\r\n            250,\r\n            `Round ${roundNumber}`,\r\n            {\r\n                fontSize: '48px',\r\n                fontFamily: '\"Titan One\", Arial',\r\n                color: '#ffffff',\r\n                stroke: '#000000',\r\n                strokeThickness: 5\r\n            }\r\n        ).setOrigin(0.5);\r\n\r\n        // Show round name\r\n        const roundName = this.add.text(\r\n            this.cameras.main.width / 2,\r\n            320,\r\n            title,\r\n            {\r\n                fontSize: '64px',\r\n                fontFamily: '\"Titan One\", Arial',\r\n                color: '#ffff00',\r\n                stroke: '#000000',\r\n                strokeThickness: 6,\r\n                align: 'center'\r\n            }\r\n        ).setOrigin(0.5);\r\n\r\n        // Show description\r\n        const cleanDescription = description.replace(/<\\/?[^>]+(>|$)/g, \"\");\r\n        const descText = this.add.text(\r\n            this.cameras.main.width / 2,\r\n            420,\r\n            cleanDescription,\r\n            {\r\n                fontSize: '32px',\r\n                fontFamily: 'Arial',\r\n                color: '#ffffff',\r\n                align: 'center',\r\n                wordWrap: { width: this.cameras.main.width - 200 }\r\n            }\r\n        ).setOrigin(0.5);\r\n\r\n        // Next button\r\n        const nextButton = this.add.text(\r\n            this.cameras.main.width / 2,\r\n            550,\r\n            'START ROUND',\r\n            {\r\n                fontSize: '36px',\r\n                fontFamily: '\"Titan One\", Arial',\r\n                color: '#ffffff',\r\n                backgroundColor: '#0066cc',\r\n                padding: { x: 30, y: 15 }\r\n            }\r\n        )\r\n            .setOrigin(0.5)\r\n            .setInteractive({ useHandCursor: true })\r\n            .on('pointerdown', () => {\r\n                this.socket.emit('host:next');\r\n            });\r\n\r\n        // Animation\r\n        this.tweens.add({\r\n            targets: [roundTitle, roundName, descText, nextButton],\r\n            alpha: { from: 0, to: 1 },\r\n            y: '-=30',\r\n            duration: 800,\r\n            ease: 'Power2',\r\n            stagger: 200\r\n        });\r\n    }\r\n\r\n    private displayQuestion(question: any): void {\r\n        // Store current question data\r\n        this.currentQuestionIndex = question.questionNumber;\r\n\r\n        // Clear previous question\r\n        this.clearQuestion();\r\n\r\n        // Create the appropriate question renderer based on type\r\n        this.currentQuestion = this.questionFactory.create(question.type, question);\r\n\r\n        // Let the specialized renderer handle the display\r\n        if (this.currentQuestion) {\r\n            this.currentQuestion.display();\r\n        }\r\n\r\n        // Reset player answers\r\n        this.playerAnswers.clear();\r\n    }\r\n\r\n    private showAnswer(questionData: any): void {\r\n        if (this.currentQuestion) {\r\n            this.currentQuestion.showAnswer(questionData);\r\n        }\r\n    }\r\n\r\n    private startTimer(duration: number): void {\r\n        // Reset the timer graphics\r\n        this.timerBar.clear();\r\n        this.timerBar.fillStyle(0x00ff00, 1);\r\n        this.timerBar.fillRect(\r\n            this.cameras.main.width / 2 - 300,\r\n            600,\r\n            600,\r\n            30\r\n        );\r\n\r\n        this.timerText.setText(`${duration}`);\r\n\r\n        // Start the timer animation\r\n        this.tweens.add({\r\n            targets: { width: 600 },\r\n            width: 0,\r\n            duration: duration * 1000,\r\n            onUpdate: (tween) => {\r\n                const value = tween.getValue();\r\n                const width = Math.max(0, value);\r\n\r\n                // Change color as time decreases\r\n                let color;\r\n                const progress = width / 600;\r\n                if (progress > 0.7) {\r\n                    color = 0x00ff00; // Green\r\n                } else if (progress > 0.3) {\r\n                    color = 0xffff00; // Yellow\r\n                } else {\r\n                    color = 0xff0000; // Red\r\n                }\r\n\r\n                // Update the timer bar\r\n                this.timerBar.clear();\r\n                this.timerBar.fillStyle(color, 1);\r\n                this.timerBar.fillRect(\r\n                    this.cameras.main.width / 2 - 300,\r\n                    600,\r\n                    width,\r\n                    30\r\n                );\r\n\r\n                // Update timer text\r\n                const secondsLeft = Math.ceil(progress * duration);\r\n                this.timerText.setText(`${secondsLeft}`);\r\n            }\r\n        });\r\n    }\r\n\r\n    private updateTimer(delta: number): void {\r\n        // Additional timer update logic if needed\r\n    }\r\n\r\n    private updatePlayerAnswer(playerId: string, answer: any): void {\r\n        if (this.currentQuestion) {\r\n            this.currentQuestion.updatePlayerAnswer(playerId, answer);\r\n        }\r\n    }\r\n\r\n    private updateScores(scores: any): void {\r\n        // Update internal score tracking\r\n        Object.entries(scores).forEach(([playerId, score]) => {\r\n            this.playerScores.set(playerId, score as number);\r\n        });\r\n\r\n        // Clear existing scoreboard\r\n        this.scoreBoard.removeAll(true);\r\n\r\n        // Get the sorted scores (highest first)\r\n        const sortedScores = Array.from(this.playerScores.entries())\r\n            .sort((a, b) => b[1] - a[1]);\r\n\r\n        // Create score elements\r\n        sortedScores.forEach(([playerId, score], index) => {\r\n            const player = this.getPlayerName(playerId);\r\n            const scoreText = this.add.text(\r\n                0,\r\n                index * 40,\r\n                `${player}: ${score}`,\r\n                {\r\n                    fontSize: '24px',\r\n                    fontFamily: 'Arial',\r\n                    color: '#ffffff'\r\n                }\r\n            );\r\n            this.scoreBoard.add(scoreText);\r\n        });\r\n\r\n        // Add animation effect for the updated scores\r\n        this.tweens.add({\r\n            targets: this.scoreBoard.getAll(),\r\n            scale: { from: 1.2, to: 1 },\r\n            duration: 300,\r\n            ease: 'Back.easeOut'\r\n        });\r\n    }\r\n\r\n    private getPlayerName(playerId: string): string {\r\n        // Placeholder - you would look up the actual player name\r\n        // based on their ID in your player tracking system\r\n        // For now just return a placeholder\r\n        return `Player ${playerId.substring(0, 4)}`;\r\n    }\r\n\r\n    private endRound(data: any): void {\r\n        // Clear question display\r\n        this.clearQuestion();\r\n\r\n        // Show round end message\r\n        const titleText = this.add.text(\r\n            this.cameras.main.width / 2,\r\n            250,\r\n            data.title,\r\n            {\r\n                fontSize: '64px',\r\n                fontFamily: '\"Titan One\", Arial',\r\n                color: '#ffffff',\r\n                stroke: '#000000',\r\n                strokeThickness: 6\r\n            }\r\n        ).setOrigin(0.5);\r\n\r\n        const descText = this.add.text(\r\n            this.cameras.main.width / 2,\r\n            350,\r\n            data.description,\r\n            {\r\n                fontSize: '32px',\r\n                fontFamily: 'Arial',\r\n                color: '#ffffff',\r\n                align: 'center',\r\n                wordWrap: { width: this.cameras.main.width - 200 }\r\n            }\r\n        ).setOrigin(0.5);\r\n\r\n        // Next button\r\n        const nextButton = this.add.text(\r\n            this.cameras.main.width / 2,\r\n            500,\r\n            'CONTINUE',\r\n            {\r\n                fontSize: '36px',\r\n                fontFamily: '\"Titan One\", Arial',\r\n                color: '#ffffff',\r\n                backgroundColor: '#0066cc',\r\n                padding: { x: 30, y: 15 }\r\n            }\r\n        )\r\n            .setOrigin(0.5)\r\n            .setInteractive({ useHandCursor: true })\r\n            .on('pointerdown', () => {\r\n                this.socket.emit('host:next');\r\n            });\r\n\r\n        // Animation\r\n        this.tweens.add({\r\n            targets: [titleText, descText, nextButton],\r\n            alpha: { from: 0, to: 1 },\r\n            y: '-=30',\r\n            duration: 800,\r\n            ease: 'Power2',\r\n            stagger: 200\r\n        });\r\n    }\r\n\r\n    private showFinalScores(): void {\r\n        // Clear the screen\r\n        this.clearQuestion();\r\n\r\n        // Show quiz complete message\r\n        const titleText = this.add.text(\r\n            this.cameras.main.width / 2,\r\n            200,\r\n            'QUIZ COMPLETE!',\r\n            {\r\n                fontSize: '72px',\r\n                fontFamily: '\"Titan One\", Arial',\r\n                color: '#ffff00',\r\n                stroke: '#000000',\r\n                strokeThickness: 8\r\n            }\r\n        ).setOrigin(0.5);\r\n\r\n        // Get winner\r\n        let winner = '';\r\n        let highScore = 0;\r\n\r\n        this.playerScores.forEach((score, playerId) => {\r\n            if (score > highScore) {\r\n                highScore = score;\r\n                winner = this.getPlayerName(playerId);\r\n            }\r\n        });\r\n\r\n        // Show winner\r\n        const winnerText = this.add.text(\r\n            this.cameras.main.width / 2,\r\n            300,\r\n            `Winner: ${winner} with ${highScore} points!`,\r\n            {\r\n                fontSize: '48px',\r\n                fontFamily: '\"Titan One\", Arial',\r\n                color: '#ffffff',\r\n                stroke: '#000000',\r\n                strokeThickness: 6\r\n            }\r\n        ).setOrigin(0.5);\r\n\r\n        // Create list of all scores\r\n        let y = 400;\r\n        const sortedScores = Array.from(this.playerScores.entries())\r\n            .sort((a, b) => b[1] - a[1]);\r\n\r\n        sortedScores.forEach(([playerId, score], index) => {\r\n            const player = this.getPlayerName(playerId);\r\n            const scoreText = this.add.text(\r\n                this.cameras.main.width / 2,\r\n                y + index * 40,\r\n                `${index + 1}. ${player}: ${score}`,\r\n                {\r\n                    fontSize: '32px',\r\n                    fontFamily: 'Arial',\r\n                    color: '#ffffff'\r\n                }\r\n            ).setOrigin(0.5);\r\n        });\r\n\r\n        // Return to lobby button\r\n        const backButton = this.add.text(\r\n            this.cameras.main.width / 2,\r\n            y + sortedScores.length * 40 + 60,\r\n            'RETURN TO LOBBY',\r\n            {\r\n                fontSize: '36px',\r\n                fontFamily: '\"Titan One\", Arial',\r\n                color: '#ffffff',\r\n                backgroundColor: '#0066cc',\r\n                padding: { x: 30, y: 15 }\r\n            }\r\n        )\r\n            .setOrigin(0.5)\r\n            .setInteractive({ useHandCursor: true })\r\n            .on('pointerdown', () => {\r\n                this.scene.start('Lobby');\r\n            });\r\n    }\r\n\r\n    private clearQuestion(): void {\r\n        // Clean up the previous question's display elements\r\n        if (this.currentQuestion) {\r\n            this.currentQuestion.destroy();\r\n            this.currentQuestion = null;\r\n        }\r\n    }\r\n\r\n    sceneShutdown(): void {\r\n        console.log('Quiz:: sceneShutdown...');\r\n        // Remove any socket listeners or other cleanup tasks here\r\n    }\r\n\r\n}\r\n\r\nconst config: Phaser.Types.Core.GameConfig = {\r\n    type: Phaser.AUTO,\r\n    width: 1920,\r\n    height: 1080,\r\n    scale: {\r\n        mode: Phaser.Scale.RESIZE\r\n    },\r\n    scene: QuizHostScene,\r\n    parent: 'container'\r\n};\r\n"],"names":["BaseScene","Phaser","Scene","constructor","Object","defineProperty","this","init","console","log","scene","key","resizeHandler","gameSize","handleResize","shutdownHandler","shutdown","scale","on","events","plugin","plugins","get","Error","socket","getSocket","onAny","event","args","width","height","scaleX","logicalHeight","camera","cameras","main","setOrigin","setZoom","updateHeight","newHeight","currentHeight","getY","originalY","getScaleFactor","off","removeAllListeners","sceneShutdown","QuestionFactory","value","Map","register","type","path","registry","set","create","data","error","MultipleChoiceQuestion","require","default","TrueFalseQuestion","HotspotQuestion","PointItOutQuestion","OrderingQuestion","MatchingQuestion","TextQuestion","DrawQuestion","QuizHostScene","super","KEY","playerScores","playerAnswers","questionFactory","setupSocketListeners","preload","load","image","rexWebFont","google","families","audio","registerQuestionRenderers","add","createUI","emit","showQuizIntro","title","description","showRoundIntro","roundnumber","question","displayQuestion","sessionID","response","updatePlayerAnswer","showAnswer","updateScores","scores","endRound","showFinalScores","startTimer","duration","roundDisplay","text","fontSize","fontFamily","color","stroke","strokeThickness","timerBar","graphics","timerText","scoreBoard","container","clearQuestion","titleText","align","cleanDescription","replace","descText","wordWrap","startButton","backgroundColor","padding","x","y","setInteractive","useHandCursor","tweens","targets","alpha","from","to","ease","stagger","roundNumber","setText","roundTitle","roundName","nextButton","currentQuestionIndex","questionNumber","currentQuestion","display","clear","questionData","fillStyle","fillRect","onUpdate","tween","getValue","Math","max","progress","secondsLeft","ceil","updateTimer","delta","playerId","answer","entries","forEach","score","removeAll","Array","sort","a","b","index","player","getPlayerName","scoreText","getAll","substring","winner","highScore","sortedScores","length","start","destroy","AUTO","Scale","RESIZE"],"mappings":"iCAGsB,MAAAA,UAAkBC,OAAOC,MAA/C,WAAAC,uBAEYC,OAAAC,eAAAC,KAAA,gBAAA,0DACAF,OAAAC,eAAAC,KAAA,kBAAA,0DACEF,OAAAC,eAAAC,KAAA,SAAA,yDAmFb,CAjFG,IAAAC,GACIC,QAAQC,IAAI,GAAGH,KAAKI,MAAMC,+BAG1BL,KAAKM,cAAiBC,IAClBP,KAAKQ,aAAaD,EAAS,EAE/BP,KAAKS,gBAAkB,KACnBT,KAAKU,UAAU,EAInBV,KAAKW,MAAMC,GAAG,SAAUZ,KAAKM,eAI7BN,KAAKa,OAAOD,GAAG,WAAYZ,KAAKS,iBAGhCT,KAAKQ,aAAaR,KAAKW,MAAMJ,UAG7B,MAAMO,EAASd,KAAKe,QAAQC,IAAI,uBAChC,IAAKF,EAAQ,MAAM,IAAIG,MAAM,iCAC7B,MAAMC,EAASJ,EAAOK,YACtB,IAAKD,EAAQ,MAAM,IAAID,MAAM,0BAC7BjB,KAAKkB,OAASA,EAEdlB,KAAKkB,OAAOE,OAAM,CAACC,KAAUC,KACzBpB,QAAQC,IAAI,4BAA6BkB,EAAOC,EAAK,GAG5D,CAED,YAAAd,CAAaD,GACTL,QAAQC,IAAI,GAAGH,KAAKI,MAAMC,gCAAiCE,EAASgB,MAAOhB,EAASiB,QAEpF,MAAMC,EAASlB,EAASgB,MAAQ,KAG1BG,EAAgBnB,EAASiB,OAASC,EAIlCE,EAAS3B,KAAK4B,QAAQC,KAC5BF,EAAOG,UAAU,EAAG,GACpBH,EAAOI,QAAQN,GAEfzB,KAAKgC,aAAaN,EACrB,CAED,YAAAM,CAAaC,GACT/B,QAAQC,IAAI,4BAA6B8B,GACzCvC,EAAUwC,cAAgBD,CAC7B,CAED,IAAAE,CAAKC,GAED,OAAOA,EADapC,KAAKqC,gBAE5B,CAGD,cAAAA,GACI,OAAO3C,EAAUwC,cAAgB,IACpC,CAED,QAAAxB,GACIR,QAAQC,IAAI,wBAGZH,KAAKW,MAAM2B,IAAI,SAAUtC,KAAKM,eAC9BN,KAAKa,OAAOyB,IAAI,WAAYtC,KAAKS,iBAGjCT,KAAKkB,OAAOqB,qBAGZvC,KAAKwC,eACR,EAnFc1C,OAAAC,eAAAL,EAAA,gBAAA,iDAAgB,aCFtB+C,EAIT,WAAA5C,CAAYO,GAHJN,OAAAC,eAAAC,KAAA,QAAA,0DACAF,OAAAC,eAAAC,KAAA,WAAA,2CAAgC0C,MAAA,IAAIC,MAGxC3C,KAAKI,MAAQA,CAChB,CAED,QAAAwC,CAASC,EAAcC,GACnB9C,KAAK+C,SAASC,IAAIH,EAAMC,EAC3B,CAED,MAAAG,CAAOJ,EAAcK,GACjB,MAAMJ,EAAO9C,KAAK+C,SAAS/B,IAAI6B,GAE/B,IAAKC,EAED,OADA5C,QAAQiD,MAAM,iCAAiCN,KACxC,KAGX,IAII,OAAQA,GACJ,IAAK,kBAED,OAAO,IAAIO,EADoBC,QAAQP,GAAMQ,SACXtD,KAAKI,MAAO8C,GAElD,IAAK,aAED,OAAO,IAAIK,EADeF,QAAQP,GAAMQ,SACXtD,KAAKI,MAAO8C,GAE7C,IAAK,UAED,OAAO,IAAIM,EADaH,QAAQP,GAAMQ,SACXtD,KAAKI,MAAO8C,GAE3C,IAAK,eAED,OAAO,IAAIO,EADgBJ,QAAQP,GAAMQ,SACXtD,KAAKI,MAAO8C,GAE9C,IAAK,WAED,OAAO,IAAIQ,EADcL,QAAQP,GAAMQ,SACXtD,KAAKI,MAAO8C,GAE5C,IAAK,WAED,OAAO,IAAIS,EADcN,QAAQP,GAAMQ,SACXtD,KAAKI,MAAO8C,GAE5C,IAAK,OAED,OAAO,IAAIU,EADUP,QAAQP,GAAMQ,SACXtD,KAAKI,MAAO8C,GAExC,IAAK,OAED,OAAO,IAAIW,EADUR,QAAQP,GAAMQ,SACXtD,KAAKI,MAAO8C,GAExC,QAEI,OADAhD,QAAQiD,MAAM,0BAA0BN,KACjC,KAElB,CAAC,MAAOM,GAEL,OADAjD,QAAQiD,MAAM,gCAAgCN,KAASM,GAChD,IACV,CACJ,EC9DL,MAAqBW,UAAsBpE,EAoBvC,WAAAG,GACIkE,MAAMD,EAAcE,KAjBhBlE,OAAAC,eAAAC,KAAA,YAAA,iDAAmB,KACnBF,OAAAC,eAAAC,KAAA,kBAAA,iDAAwC,OACxCF,OAAAC,eAAAC,KAAA,eAAA,iDAAoB,OACpBF,OAAAC,eAAAC,KAAA,uBAAA,iDAA+B,IAC/BF,OAAAC,eAAAC,KAAA,oBAAA,iDAA4B,IAC5BF,OAAAC,eAAAC,KAAA,eAAA,2CAAoC0C,MAAA,IAAIC,MACxC7C,OAAAC,eAAAC,KAAA,gBAAA,2CAAkC0C,MAAA,IAAIC,MACtC7C,OAAAC,eAAAC,KAAA,kBAAA,0DAGAF,OAAAC,eAAAC,KAAA,eAAA,0DACAF,OAAAC,eAAAC,KAAA,WAAA,0DACAF,OAAAC,eAAAC,KAAA,YAAA,0DACAF,OAAAC,eAAAC,KAAA,aAAA,yDAKP,CAED,IAAAC,GACI8D,MAAM9D,OAEND,KAAKiE,aAAe,IAAItB,IACxB3C,KAAKkE,cAAgB,IAAIvB,IACzB3C,KAAKmE,gBAAkB,IAAI1B,EAAgBzC,MAG3CA,KAAKoE,sBACR,CAED,OAAAC,GAEIrE,KAAKsE,KAAKC,MAAM,kBAAmB,sBACnCvE,KAAKsE,KAAKC,MAAM,gBAAiB,0BACjCvE,KAAKsE,KAAKC,MAAM,gBAAiB,4BAGjCvE,KAAKsE,KAAKE,WAAW,CACjBC,OAAQ,CACJC,SAAU,CAAC,gBAKnB1E,KAAKsE,KAAKK,MAAM,YAAa,+BAC7B3E,KAAKsE,KAAKK,MAAM,UAAW,6BAC3B3E,KAAKsE,KAAKK,MAAM,YAAa,+BAG7B3E,KAAK4E,2BACR,CAED,MAAA3B,GAEIjD,KAAK6E,IAAIN,MAAM,EAAG,EAAG,mBAAmBzC,UAAU,EAAG,GAGrD9B,KAAK8E,WAGL9E,KAAKkB,OAAO6D,KAAK,kBACpB,CAGO,oBAAAX,GAEJpE,KAAKkB,OAAON,GAAG,oBAAqBsC,IAChClD,KAAKgF,cAAc9B,EAAK+B,MAAO/B,EAAKgC,YAAY,IAIpDlF,KAAKkB,OAAON,GAAG,qBAAsBsC,IACjClD,KAAKmF,eAAejC,EAAKkC,YAAalC,EAAK+B,MAAO/B,EAAKgC,YAAY,IAIvElF,KAAKkB,OAAON,GAAG,mBAAoByE,IAC/BrF,KAAKsF,gBAAgBD,EAAS,IAIlCrF,KAAKkB,OAAON,GAAG,2BAA4BsC,IACvClD,KAAKkE,cAAclB,IAAIE,EAAKqC,UAAWrC,EAAKsC,UAC5CxF,KAAKyF,mBAAmBvC,EAAKqC,UAAWrC,EAAKsC,SAAS,IAI1DxF,KAAKkB,OAAON,GAAG,qBAAsBsC,IACjClD,KAAK0F,WAAWxC,EAAK,IAIzBlD,KAAKkB,OAAON,GAAG,uBAAwBsC,IACnClD,KAAK2F,aAAazC,EAAK0C,OAAO,IAIlC5F,KAAKkB,OAAON,GAAG,mBAAoBsC,IAC/BlD,KAAK6F,SAAS3C,EAAK,IAIvBlD,KAAKkB,OAAON,GAAG,kBAAmBsC,IAC9BlD,KAAK8F,iBAAiB,IAI1B9F,KAAKkB,OAAON,GAAG,qBAAsBsC,IACjClD,KAAK+F,WAAW7C,EAAK8C,SAAS,GAErC,CAEO,QAAAlB,GAEJ9E,KAAKiG,aAAejG,KAAK6E,IAAIqB,KACzBlG,KAAK4B,QAAQC,KAAKN,MAAQ,EAC1B,GACA,GACA,CACI4E,SAAU,OACVC,WAAY,qBACZC,MAAO,UACPC,OAAQ,UACRC,gBAAiB,IAEvBzE,UAAU,IAGZ9B,KAAKwG,SAAWxG,KAAK6E,IAAI4B,WAGzBzG,KAAK0G,UAAY1G,KAAK6E,IAAIqB,KACtBlG,KAAK4B,QAAQC,KAAKN,MAAQ,EAC1B,IACA,GACA,CACI4E,SAAU,OACVC,WAAY,qBACZC,MAAO,UACPC,OAAQ,UACRC,gBAAiB,IAEvBzE,UAAU,IAGZ9B,KAAK2G,WAAa3G,KAAK6E,IAAI+B,UAAU,GAAI,IAC5C,CAEO,yBAAAhC,GAEJ5E,KAAKmE,gBAAgBvB,SAAS,kBAAmB,iCACjD5C,KAAKmE,gBAAgBvB,SAAS,aAAc,4BAC5C5C,KAAKmE,gBAAgBvB,SAAS,UAAW,0BACzC5C,KAAKmE,gBAAgBvB,SAAS,eAAgB,6BAC9C5C,KAAKmE,gBAAgBvB,SAAS,WAAY,2BAC1C5C,KAAKmE,gBAAgBvB,SAAS,WAAY,2BAC1C5C,KAAKmE,gBAAgBvB,SAAS,OAAQ,uBACtC5C,KAAKmE,gBAAgBvB,SAAS,OAAQ,sBACzC,CAEO,aAAAoC,CAAcC,EAAeC,GAEjClF,KAAK6G,gBAGL,MAAMC,EAAY9G,KAAK6E,IAAIqB,KACvBlG,KAAK4B,QAAQC,KAAKN,MAAQ,EAC1B,IACA0D,EACA,CACIkB,SAAU,OACVC,WAAY,qBACZC,MAAO,UACPC,OAAQ,UACRC,gBAAiB,EACjBQ,MAAO,WAEbjF,UAAU,IAGNkF,EAAmB9B,EAAY+B,QAAQ,kBAAmB,IAG1DC,EAAWlH,KAAK6E,IAAIqB,KACtBlG,KAAK4B,QAAQC,KAAKN,MAAQ,EAC1B,IACAyF,EACA,CACIb,SAAU,OACVC,WAAY,QACZC,MAAO,UACPU,MAAO,SACPI,SAAU,CAAE5F,MAAOvB,KAAK4B,QAAQC,KAAKN,MAAQ,OAEnDO,UAAU,IAGNsF,EAAcpH,KAAK6E,IAAIqB,KACzBlG,KAAK4B,QAAQC,KAAKN,MAAQ,EAC1B,IACA,aACA,CACI4E,SAAU,OACVC,WAAY,qBACZC,MAAO,UACPgB,gBAAiB,UACjBC,QAAS,CAAEC,EAAG,GAAIC,EAAG,MAGxB1F,UAAU,IACV2F,eAAe,CAAEC,eAAe,IAChC9G,GAAG,eAAe,KACfZ,KAAKkB,OAAO6D,KAAK,YAAY,IAIrC/E,KAAK2H,OAAO9C,IAAI,CACZ+C,QAAS,CAACd,EAAWI,EAAUE,GAC/BS,MAAO,CAAEC,KAAM,EAAGC,GAAI,GACtBP,EAAG,OACHxB,SAAU,IACVgC,KAAM,SACNC,QAAS,KAEhB,CAEO,cAAA9C,CAAe+C,EAAqBjD,EAAeC,GAEvDlF,KAAK6G,gBAGL7G,KAAKiG,aAAakC,QAAQ,SAASD,MAAgBjD,KAGnD,MAAMmD,EAAapI,KAAK6E,IAAIqB,KACxBlG,KAAK4B,QAAQC,KAAKN,MAAQ,EAC1B,IACA,SAAS2G,IACT,CACI/B,SAAU,OACVC,WAAY,qBACZC,MAAO,UACPC,OAAQ,UACRC,gBAAiB,IAEvBzE,UAAU,IAGNuG,EAAYrI,KAAK6E,IAAIqB,KACvBlG,KAAK4B,QAAQC,KAAKN,MAAQ,EAC1B,IACA0D,EACA,CACIkB,SAAU,OACVC,WAAY,qBACZC,MAAO,UACPC,OAAQ,UACRC,gBAAiB,EACjBQ,MAAO,WAEbjF,UAAU,IAGNkF,EAAmB9B,EAAY+B,QAAQ,kBAAmB,IAC1DC,EAAWlH,KAAK6E,IAAIqB,KACtBlG,KAAK4B,QAAQC,KAAKN,MAAQ,EAC1B,IACAyF,EACA,CACIb,SAAU,OACVC,WAAY,QACZC,MAAO,UACPU,MAAO,SACPI,SAAU,CAAE5F,MAAOvB,KAAK4B,QAAQC,KAAKN,MAAQ,OAEnDO,UAAU,IAGNwG,EAAatI,KAAK6E,IAAIqB,KACxBlG,KAAK4B,QAAQC,KAAKN,MAAQ,EAC1B,IACA,cACA,CACI4E,SAAU,OACVC,WAAY,qBACZC,MAAO,UACPgB,gBAAiB,UACjBC,QAAS,CAAEC,EAAG,GAAIC,EAAG,MAGxB1F,UAAU,IACV2F,eAAe,CAAEC,eAAe,IAChC9G,GAAG,eAAe,KACfZ,KAAKkB,OAAO6D,KAAK,YAAY,IAIrC/E,KAAK2H,OAAO9C,IAAI,CACZ+C,QAAS,CAACQ,EAAYC,EAAWnB,EAAUoB,GAC3CT,MAAO,CAAEC,KAAM,EAAGC,GAAI,GACtBP,EAAG,OACHxB,SAAU,IACVgC,KAAM,SACNC,QAAS,KAEhB,CAEO,eAAA3C,CAAgBD,GAEpBrF,KAAKuI,qBAAuBlD,EAASmD,eAGrCxI,KAAK6G,gBAGL7G,KAAKyI,gBAAkBzI,KAAKmE,gBAAgBlB,OAAOoC,EAASxC,KAAMwC,GAG9DrF,KAAKyI,iBACLzI,KAAKyI,gBAAgBC,UAIzB1I,KAAKkE,cAAcyE,OACtB,CAEO,UAAAjD,CAAWkD,GACX5I,KAAKyI,iBACLzI,KAAKyI,gBAAgB/C,WAAWkD,EAEvC,CAEO,UAAA7C,CAAWC,GAEfhG,KAAKwG,SAASmC,QACd3I,KAAKwG,SAASqC,UAAU,MAAU,GAClC7I,KAAKwG,SAASsC,SACV9I,KAAK4B,QAAQC,KAAKN,MAAQ,EAAI,IAC9B,IACA,IACA,IAGJvB,KAAK0G,UAAUyB,QAAQ,GAAGnC,KAG1BhG,KAAK2H,OAAO9C,IAAI,CACZ+C,QAAS,CAAErG,MAAO,KAClBA,MAAO,EACPyE,SAAqB,IAAXA,EACV+C,SAAWC,IACP,MAAMtG,EAAQsG,EAAMC,WACd1H,EAAQ2H,KAAKC,IAAI,EAAGzG,GAG1B,IAAI2D,EACJ,MAAM+C,EAAW7H,EAAQ,IAErB8E,EADA+C,EAAW,GACH,MACDA,EAAW,GACV,SAEA,SAIZpJ,KAAKwG,SAASmC,QACd3I,KAAKwG,SAASqC,UAAUxC,EAAO,GAC/BrG,KAAKwG,SAASsC,SACV9I,KAAK4B,QAAQC,KAAKN,MAAQ,EAAI,IAC9B,IACAA,EACA,IAIJ,MAAM8H,EAAcH,KAAKI,KAAKF,EAAWpD,GACzChG,KAAK0G,UAAUyB,QAAQ,GAAGkB,IAAc,GAGnD,CAEO,WAAAE,CAAYC,GAEnB,CAEO,kBAAA/D,CAAmBgE,EAAkBC,GACrC1J,KAAKyI,iBACLzI,KAAKyI,gBAAgBhD,mBAAmBgE,EAAUC,EAEzD,CAEO,YAAA/D,CAAaC,GAEjB9F,OAAO6J,QAAQ/D,GAAQgE,SAAQ,EAAEH,EAAUI,MACvC7J,KAAKiE,aAAajB,IAAIyG,EAAUI,EAAgB,IAIpD7J,KAAK2G,WAAWmD,WAAU,GAGLC,MAAMjC,KAAK9H,KAAKiE,aAAa0F,WAC7CK,MAAK,CAACC,EAAGC,IAAMA,EAAE,GAAKD,EAAE,KAGhBL,SAAQ,EAAEH,EAAUI,GAAQM,KACrC,MAAMC,EAASpK,KAAKqK,cAAcZ,GAC5Ba,EAAYtK,KAAK6E,IAAIqB,KACvB,EACQ,GAARiE,EACA,GAAGC,MAAWP,IACd,CACI1D,SAAU,OACVC,WAAY,QACZC,MAAO,YAGfrG,KAAK2G,WAAW9B,IAAIyF,EAAU,IAIlCtK,KAAK2H,OAAO9C,IAAI,CACZ+C,QAAS5H,KAAK2G,WAAW4D,SACzB5J,MAAO,CAAEmH,KAAM,IAAKC,GAAI,GACxB/B,SAAU,IACVgC,KAAM,gBAEb,CAEO,aAAAqC,CAAcZ,GAIlB,MAAO,UAAUA,EAASe,UAAU,EAAG,IAC1C,CAEO,QAAA3E,CAAS3C,GAEblD,KAAK6G,gBAGL,MAAMC,EAAY9G,KAAK6E,IAAIqB,KACvBlG,KAAK4B,QAAQC,KAAKN,MAAQ,EAC1B,IACA2B,EAAK+B,MACL,CACIkB,SAAU,OACVC,WAAY,qBACZC,MAAO,UACPC,OAAQ,UACRC,gBAAiB,IAEvBzE,UAAU,IAENoF,EAAWlH,KAAK6E,IAAIqB,KACtBlG,KAAK4B,QAAQC,KAAKN,MAAQ,EAC1B,IACA2B,EAAKgC,YACL,CACIiB,SAAU,OACVC,WAAY,QACZC,MAAO,UACPU,MAAO,SACPI,SAAU,CAAE5F,MAAOvB,KAAK4B,QAAQC,KAAKN,MAAQ,OAEnDO,UAAU,IAGNwG,EAAatI,KAAK6E,IAAIqB,KACxBlG,KAAK4B,QAAQC,KAAKN,MAAQ,EAC1B,IACA,WACA,CACI4E,SAAU,OACVC,WAAY,qBACZC,MAAO,UACPgB,gBAAiB,UACjBC,QAAS,CAAEC,EAAG,GAAIC,EAAG,MAGxB1F,UAAU,IACV2F,eAAe,CAAEC,eAAe,IAChC9G,GAAG,eAAe,KACfZ,KAAKkB,OAAO6D,KAAK,YAAY,IAIrC/E,KAAK2H,OAAO9C,IAAI,CACZ+C,QAAS,CAACd,EAAWI,EAAUoB,GAC/BT,MAAO,CAAEC,KAAM,EAAGC,GAAI,GACtBP,EAAG,OACHxB,SAAU,IACVgC,KAAM,SACNC,QAAS,KAEhB,CAEO,eAAAnC,GAEJ9F,KAAK6G,gBAGa7G,KAAK6E,IAAIqB,KACvBlG,KAAK4B,QAAQC,KAAKN,MAAQ,EAC1B,IACA,iBACA,CACI4E,SAAU,OACVC,WAAY,qBACZC,MAAO,UACPC,OAAQ,UACRC,gBAAiB,IAEvBzE,UAAU,IAGZ,IAAI2I,EAAS,GACTC,EAAY,EAEhB1K,KAAKiE,aAAa2F,SAAQ,CAACC,EAAOJ,KAC1BI,EAAQa,IACRA,EAAYb,EACZY,EAASzK,KAAKqK,cAAcZ,GAC/B,IAIczJ,KAAK6E,IAAIqB,KACxBlG,KAAK4B,QAAQC,KAAKN,MAAQ,EAC1B,IACA,WAAWkJ,UAAeC,YAC1B,CACIvE,SAAU,OACVC,WAAY,qBACZC,MAAO,UACPC,OAAQ,UACRC,gBAAiB,IAEvBzE,UAAU,IAIZ,MAAM6I,EAAeZ,MAAMjC,KAAK9H,KAAKiE,aAAa0F,WAC7CK,MAAK,CAACC,EAAGC,IAAMA,EAAE,GAAKD,EAAE,KAE7BU,EAAaf,SAAQ,EAAEH,EAAUI,GAAQM,KACrC,MAAMC,EAASpK,KAAKqK,cAAcZ,GAChBzJ,KAAK6E,IAAIqB,KACvBlG,KAAK4B,QAAQC,KAAKN,MAAQ,EAP1B,IAQY,GAAR4I,EACJ,GAAGA,EAAQ,MAAMC,MAAWP,IAC5B,CACI1D,SAAU,OACVC,WAAY,QACZC,MAAO,YAEbvE,UAAU,GAAK,IAIF9B,KAAK6E,IAAIqB,KACxBlG,KAAK4B,QAAQC,KAAKN,MAAQ,EApBtB,IAqBsB,GAAtBoJ,EAAaC,OAAc,GAC/B,kBACA,CACIzE,SAAU,OACVC,WAAY,qBACZC,MAAO,UACPgB,gBAAiB,UACjBC,QAAS,CAAEC,EAAG,GAAIC,EAAG,MAGxB1F,UAAU,IACV2F,eAAe,CAAEC,eAAe,IAChC9G,GAAG,eAAe,KACfZ,KAAKI,MAAMyK,MAAM,QAAQ,GAEpC,CAEO,aAAAhE,GAEA7G,KAAKyI,kBACLzI,KAAKyI,gBAAgBqC,UACrB9K,KAAKyI,gBAAkB,KAE9B,CAED,aAAAjG,GACItC,QAAQC,IAAI,0BAEf,SAllBeL,OAAAC,eAAA+D,EAAA,MAAA,iDAAM,kBAulBhBnE,OAAOoL,KAIHpL,OAAOqL,MAAMC"}