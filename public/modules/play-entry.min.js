class e{static async getUser(){try{const e=await fetch("/auth/me");if(!e.ok)return null;const t=await e.json();return console.log("Auth.getUser response:",t),t.success&&t.data?t.data.user:null}catch(e){return console.error("Auth.getUser error:",e),null}}static async checkRole(e){const t=await this.getUser();if(!t)return!1;const n=["new","host","admin"];return n.indexOf(t.role)>=n.indexOf(e)}static async syncUI(){const e=await this.getUser(),t=e?e.role:"guest",n=this.getRoleLevel(t);document.querySelectorAll("[data-role], [data-role-max]").forEach((e=>{const t=e.getAttribute("data-role"),o=e.getAttribute("data-role-max"),r=t?this.getRoleLevel(t):0,a=o?this.getRoleLevel(o):99;e.style.display=n>=r&&n<=a?"":"none"}))}static getRoleLevel(e){return{guest:0,new:1,host:2,admin:3}[e]||0}}const t=[12138118,12138231,12138743,12138846,12139963,12140600,12143538,12189343,12214366,12215207,12232806,12348050,12358126,12358607,12359578,12360465,12370419,12370830,12391847,12436639,12454847,12474909,12502935,12660677,12789062,12791500,13003915,13100182];function n(e){const t=e.target.id;document.getElementById("avatar").value=t,document.querySelectorAll("#gallerycontainer .gallery").forEach((e=>{e.classList.remove("selected")}));const n=e.target.closest(".gallery");n&&n.classList.add("selected"),o()}function o(){const e=document.getElementById("gameform"),t=document.getElementById("submit");if(!e||!t)return;const n=e.name.value.trim(),o=e.room.value.trim(),r=e.avatar.value,a=""!==n&&""!==o&&""!==r;t.style.opacity=a?"1":"0.5"}async function r(e){const t=document.getElementById("gameform"),n=t.name.value.trim(),o=t.room.value.trim(),r=t.avatar.value,a=document.getElementById("form-error");if(a&&(a.style.display="none",a.textContent=""),""===n||""===o||""===r)return e.preventDefault(),a&&(a.style.display="block",""===o?a.textContent="Please enter a room code":""===n?a.textContent="Please enter your team name":""===r&&(a.textContent="Please choose an avatar")),!1;try{!function(){const e=document.documentElement;document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement||(e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen&&e.msRequestFullscreen())}()}catch(e){console.log("Fullscreen error:",e)}return!0}document.addEventListener("DOMContentLoaded",(async()=>{const a=document.getElementById("gameform");a&&(a.addEventListener("submit",r),a.name.addEventListener("input",o),a.room.addEventListener("input",o));const l=new URLSearchParams(window.location.search).get("room");l&&document.getElementById("room")&&(document.getElementById("room").value=l),t.forEach((e=>{!function(e){const t=document.getElementById("gallerycontainer");if(!t)return;const o=document.createElement("div");o.setAttribute("class","gallery"),o.innerHTML=`\n        <img id='${e}' src="/img/avatar-100/image-from-rawpixel-id-${e}-original.png">\n    `,o.addEventListener("click",n),t.appendChild(o)}(e)}));const s=await e.getUser(),c=document.getElementById("auth-status");if(c)if(s){if(c.innerHTML=`\n                <div style="background: rgba(16, 185, 129, 0.15); padding: 12px 20px; border-radius: 16px; display: inline-flex; align-items: center; gap: 10px; border: 1px solid rgba(16, 185, 129, 0.2);">\n                    <div style="width: 8px; height: 8px; background: #10b981; border-radius: 50%; box-shadow: 0 0 10px #10b981;"></div>\n                    <span style="color: #fff; font-size: 0.9rem;">Playing as <strong>${s.displayname||s.email}</strong></span>\n                </div>\n            `,s.displayname&&document.getElementById("name")&&(document.getElementById("name").value=s.displayname),s.avatar){const e=document.getElementById(s.avatar);e&&e.click()}o()}else{const e=window.location.pathname+window.location.search;c.innerHTML=`\n                <div style="background: rgba(255, 255, 255, 0.05); padding: 10px 15px; border-radius: 16px; display: inline-block; border: 1px solid rgba(255, 255, 255, 0.1); backdrop-filter: blur(10px); white-space: nowrap;">\n                    <span style="color: var(--clr-text-muted); font-size: 0.85rem;">Save your scores?</span>\n                    <a href="/login?redirect=${encodeURIComponent(e)}" style="color: var(--clr-accent); text-decoration: none; font-weight: 700; margin-left: 6px; font-size: 0.85rem;">Login</a>\n                    <span style="margin: 0 6px; color: rgba(255,255,255,0.2);">|</span>\n                    <a href="/login?mode=signup&redirect=${encodeURIComponent(e)}" style="color: var(--clr-accent); text-decoration: none; font-weight: 700; font-size: 0.85rem;">Sign Up</a>\n                </div>\n            `}o()}));
//# sourceMappingURL=play-entry.min.js.map
