console.log("play.werewolves.js is executing");class t{constructor(t){this.socket=t,this.start(),console.log("Werewolves game initialized")}start(){console.log("Starting the werewolves game..."),this.loadFonts(),this.buildDOM(),this.attachSocketEvents(this.socket),this.attachButtonEvents(),this.showPanel("panel-1")}end(){console.log("Ending the werewolves game..."),this.removeButtonEvents(),this.removeSocketEvents(this.socket),this.unloadDOM(),this.unloadFonts()}buildDOM(){const t=document.createElement("div");t.id="game",document.body.appendChild(t),t.innerHTML='\n            <div id="rolecontainer">\n                <button id="button-role">ROLE</button>\n            </div>\n            <div class="panel" id="panel-role"></div>\n            \n\t\t\t<div class="panel" id="panel-start">\n\t\t\t\t\x3c!-- For now put these here while testing --\x3e\n\t\t\t\t<div class="panel-content">\n\t\t\t\t\t<button id="connect">Connect</button>\n\t\t\t\t\t<button id="disconnect">Disconnect</button>\n\t\t\t\t\t<h1>Welcome!</h1>\n\t\t\t\t\t<p>Waiting to start...</p>        \n\t\t\t\t</div>\n\t\t\t</div>\n    \n\n\t\t\t<div class="panel" id="panel-1">\n\t\t\t\t<div class="button-container" id="button-container-1"></div>\n\t\t\t</div>\n\t\t\t<div class="panel" id="panel-2">\n\t\t\t\t<div class="button-container" id="button-container-2"></div>\n\t\t\t</div>\n\t\t\t<div class="panel" id="panel-3">\n\t\t\t\t<div class="button-container" id="button-container-3"></div>\n\t\t\t</div>\n\t\t'}unloadDOM(){document.getElementById("game").remove()}addButton(t,e){const n=document.getElementById(t),o=document.createElement("button"),s=e.length;s>36?o.style.setProperty("--button-font-size","16px"):s>16?o.style.setProperty("--button-font-size","20px"):o.style.setProperty("--button-font-size","24px"),o.textContent=e,n.appendChild(o)}adjustFontSizeToFit(t){const e=document.getElementById(t),n=e.querySelectorAll("button"),o=window.innerHeight-80;n.length>5?e.style.setProperty("gap","4vh"):n.length>4?e.style.setProperty("gap","6vh"):e.style.setProperty("gap","8vh");let s=30;const l=()=>{let t=e.getBoundingClientRect().height;console.log("Adjusting font size:",t,o,s),t>o&&s>0&&(s--,n.forEach((t=>{const e=parseInt(window.getComputedStyle(t).fontSize);t.style.setProperty("--button-font-size",e-1+"px")})),requestAnimationFrame(l))};requestAnimationFrame(l)}showPanel(t){document.querySelectorAll(".panel").forEach((t=>t.classList.remove("active"))),document.getElementById(t).classList.add("active")}socketConnect(t){this.socket.connect()}socketDisconnect(){this.socket.disconnect()}loadFonts(){const t=document.createElement("link");t.rel="stylesheet",t.href="https://fonts.googleapis.com/css2?family=Lilita+One&display=swap",t.id="dynamic-font-link",document.head.appendChild(t)}unloadFonts(){const t=document.getElementById("dynamic-font-link");t&&document.head.removeChild(t)}attachSocketEvents(t){console.log("Attaching socket events to werewolves game"),t.on("connect",this.onConnect),t.on("disconnect",this.onDisconnect),t.on("player",this.onPlayer),t.on("playerrole",(t=>{console.log("playerrole:",t),this.DOMplayerRole(t)}))}removeSocketEvents(t){console.log("Removing socket events from werewolves game"),t.off("connect",this.onConnect),t.off("disconnect",this.onDisconnect),t.off("player",this.onPlayer)}attachButtonEvents(){console.log("Attaching button events to werewolves game");const t=document.getElementById("button-role");t.addEventListener("mousedown",this.buttonRolePress),t.addEventListener("mouseup",this.buttonRoleRelease),t.addEventListener("touchstart",this.buttonRolePress),t.addEventListener("touchend",this.buttonRoleRelease),t.addEventListener("selectstart",(()=>!1))}removeButtonEvents(){console.log("Removing button events from werewolves game")}buttonRolePress(t){console.log("buttonRolePress");const e=document.querySelectorAll(".panel .active");console.log("panels:",e);let n=null;e.length>0&&(n=e[0].id),document.getElementById("panel-role").setAttribute("data-active",n),this.showPanel("panel-role")}buttonRoleRelease(){console.log("buttonRoleRelease");const t=document.getElementById("panel-role").getAttribute("data-active");this.showPanel(t)}DOMplayerRole(t){document.getElementById("panel-role").innerHTML=`\n            Your role:<br/><br/>${t}\n            `,document.getElementById("rolecontainer").style.display="block"}onConnect(){console.log("Connected to server")}onDisconnect(){console.log("Disconnected from server")}onPlayer(t){console.log("Player:",t)}}export{t as Game};
//# sourceMappingURL=play.werewolves.min.js.map
